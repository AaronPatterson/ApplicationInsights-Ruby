<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!file.README.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>Application Insights SDK for Ruby</h1>

<p><a href="http://badge.fury.io/rb/application_insights"><img src="https://badge.fury.io/rb/application_insights.svg" alt="Gem Version"></a></p>

<blockquote>
<p>Ruby is a dynamic, open source programming language with a focus on simplicity and productivity. It has an elegant syntax that is natural to read and easy to write. 
-- <cite><a href="https://www.ruby-lang.org/en/">Ruby - Official Site</a></cite></p>
</blockquote>

<p>This project extends the Application Insights API surface to support Ruby. <a href="http://azure.microsoft.com/en-us/services/application-insights/">Application Insights</a> is a service that allows developers to keep their application available, performing and succeeding. This Ruby gem will allow you to send telemetry of various kinds (event, trace, exception, etc.) to the Application Insights service where they can be visualized in the Azure Portal. </p>

<h2>Requirements</h2>

<p>Ruby 1.9.3 is currently supported by this gem. </p>

<h2>Installation</h2>

<p>To install the latest release you can use <em>gem</em>.</p>

<pre class="code ruby"><code class="ruby">$ gem install application_insights
</code></pre>

<h2>Usage</h2>

<p>Once installed, you can send telemetry to Application Insights. Here are a few samples.</p>

<blockquote>
<p><strong>Note</strong>: before you can send data to you will need an instrumentation key. Please see the <a href="https://github.com/Microsoft/AppInsights-Home/wiki#getting-an-application-insights-instrumentation-key">Getting an Application Insights Instrumentation Key</a> section for more information.</p>
</blockquote>

<h3>Sending a simple event telemetry item</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>application_insights</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>TelemetryClient</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_instrumentation_key'>instrumentation_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;YOUR INSTRUMENTATION KEY GOES HERE&gt;</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_track_event'>track_event</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>My event</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
</code></pre>

<h3>Sending an event telemetry item with custom properties and measurements</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>application_insights</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>TelemetryClient</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_instrumentation_key'>instrumentation_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;YOUR INSTRUMENTATION KEY GOES HERE&gt;</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_track_event'>track_event</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>My event</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:properties</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>custom property</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>some value</span><span class='tstring_end'>'</span></span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:measurements</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>custom metric</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='int'>13</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
</code></pre>

<h3>Sending a trace telemetry item with custom properties</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>application_insights</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>TelemetryClient</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_instrumentation_key'>instrumentation_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;YOUR INSTRUMENTATION KEY GOES HERE&gt;</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_track_trace'>track_trace</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>My trace statement</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:properties</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>custom property</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>some value</span><span class='tstring_end'>'</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
</code></pre>

<h3>Sending a metric telemetry item (without and with optional values)</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>application_insights</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>TelemetryClient</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_instrumentation_key'>instrumentation_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;YOUR INSTRUMENTATION KEY GOES HERE&gt;</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_track_metric'>track_metric</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>My metric</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>42</span>
<span class='comment'># with all optional values set
</span><span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_track_metric'>track_metric</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>My metric</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>42</span><span class='comma'>,</span> <span class='symbol'>:kind</span> <span class='op'>=&gt;</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>Channel</span><span class='op'>::</span><span class='const'>Contracts</span><span class='op'>::</span><span class='const'>DataPointType</span><span class='op'>::</span><span class='const'>AGGREGATION</span><span class='comma'>,</span> <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='int'>3</span><span class='comma'>,</span> <span class='symbol'>:min</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span> <span class='symbol'>:max</span> <span class='op'>=&gt;</span> <span class='int'>100</span><span class='comma'>,</span> <span class='symbol'>:std_dev</span> <span class='op'>=&gt;</span> <span class='int'>10</span><span class='comma'>,</span> <span class='symbol'>:properties</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>custom property</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>some value</span><span class='tstring_end'>'</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
</code></pre>

<h3>Sending an exception telemetry item with custom properties and measurements</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>application_insights</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>TelemetryClient</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_instrumentation_key'>instrumentation_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;YOUR INSTRUMENTATION KEY GOES HERE&gt;</span><span class='tstring_end'>'</span></span>
<span class='kw'>begin</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Something has gone wrong!</span><span class='tstring_end'>'</span></span>
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_track_exception'>track_exception</span> <span class='id identifier rubyid_e'>e</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
</code></pre>

<h3>Configuring context for a telemetry client instance</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>application_insights</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>TelemetryClient</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_instrumentation_key'>instrumentation_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;YOUR INSTRUMENTATION KEY GOES HERE&gt;</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_application'>application</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>My application</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_application'>application</span><span class='period'>.</span><span class='id identifier rubyid_ver'>ver</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>1.2.3</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_device'>device</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>My current device</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_device'>device</span><span class='period'>.</span><span class='id identifier rubyid_oem_name'>oem_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Asus</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_device'>device</span><span class='period'>.</span><span class='id identifier rubyid_model'>model</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>X31A</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_device'>device</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Other</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>santa@northpole.net</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_track_trace'>track_trace</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>My trace with context</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_flush'>flush</span>
</code></pre>

<h3>Configuring synchronous (default) channel properties</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>application_insights</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_tc'>tc</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>TelemetryClient</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='comment'># flush telemetry if we have 10 or more telemetry items in our queue
</span><span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_queue'>queue</span><span class='period'>.</span><span class='id identifier rubyid_max_queue_length'>max_queue_length</span> <span class='op'>=</span> <span class='int'>10</span>
<span class='comment'># send telemetry to the service in batches of 5
</span><span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_sender'>sender</span><span class='period'>.</span><span class='id identifier rubyid_send_buffer_size'>send_buffer_size</span> <span class='op'>=</span> <span class='int'>5</span>
</code></pre>

<h3>Configuring an asynchronous channel instead of the synchronous default</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>application_insights</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_sender'>sender</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>Channel</span><span class='op'>::</span><span class='const'>AsynchronousSender</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_queue'>queue</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>Channel</span><span class='op'>::</span><span class='const'>AsynchronousQueue</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_sender'>sender</span>
<span class='id identifier rubyid_channel'>channel</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>Channel</span><span class='op'>::</span><span class='const'>TelemetryChannel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_queue'>queue</span>
<span class='id identifier rubyid_tc'>tc</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>TelemetryClient</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_channel'>channel</span>
<span class='comment'># Note: the event will be sent on a separate thread; if the app finishes before
</span><span class='comment'>#       the thread finishes, the data is lost
</span><span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_track_event'>track_event</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>My event</span><span class='tstring_end'>'</span></span>
</code></pre>

<h3>Configuring asynchronous channel properties</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>application_insights</span><span class='tstring_end'>'</span></span>
<span class='id identifier rubyid_sender'>sender</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>Channel</span><span class='op'>::</span><span class='const'>AsynchronousSender</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_queue'>queue</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>Channel</span><span class='op'>::</span><span class='const'>AsynchronousQueue</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_sender'>sender</span>
<span class='id identifier rubyid_channel'>channel</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>Channel</span><span class='op'>::</span><span class='const'>TelemetryChannel</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_queue'>queue</span>
<span class='id identifier rubyid_tc'>tc</span> <span class='op'>=</span> <span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>TelemetryClient</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_channel'>channel</span>
<span class='comment'># flush telemetry if we have 10 or more telemetry items in our queue
</span><span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_queue'>queue</span><span class='period'>.</span><span class='id identifier rubyid_max_queue_length'>max_queue_length</span> <span class='op'>=</span> <span class='int'>10</span>
<span class='comment'># send telemetry to the service in batches of 5
</span><span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_sender'>sender</span><span class='period'>.</span><span class='id identifier rubyid_send_buffer_size'>send_buffer_size</span> <span class='op'>=</span> <span class='int'>5</span>
<span class='comment'># the background worker thread will be active for 5 seconds before it shuts down. if
</span><span class='comment'># during this time items are picked up from the queue, the timer is reset.
</span><span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_sender'>sender</span><span class='period'>.</span><span class='id identifier rubyid_send_time'>send_time</span> <span class='op'>=</span> <span class='int'>5</span>
<span class='comment'># the background worker thread will poll the queue every 0.5 seconds for new items
</span><span class='id identifier rubyid_tc'>tc</span><span class='period'>.</span><span class='id identifier rubyid_channel'>channel</span><span class='period'>.</span><span class='id identifier rubyid_sender'>sender</span><span class='period'>.</span><span class='id identifier rubyid_send_interval'>send_interval</span> <span class='op'>=</span> <span class='float'>0.5</span>
</code></pre>

<h3>Collecting unhandled exceptions</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>application_insights</span><span class='tstring_end'>'</span></span>
<span class='comment'># setup unhandled exception handler
</span><span class='const'>ApplicationInsights</span><span class='op'>::</span><span class='const'>UnhandledException</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;YOUR INSTRUMENTATION KEY GOES HERE&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='comment'># raise an exception and this would be send to Application Insights Service
</span><span class='id identifier rubyid_raise'>raise</span> <span class='const'>Exception</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Boom!</span><span class='tstring_end'>'</span></span>
</code></pre>
</div></div>

    <div id="footer">
  Generated on Thu Jan 15 16:20:36 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-1.9.3).
</div>

  </body>
</html>